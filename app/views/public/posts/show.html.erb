<div class="contents_2p">
  <div class="container-fluid">
    <div class="row">
      <div class="col mt-7 text-light">
        <div class="mx-auto pt-5" style="width: 700px" style="margin-top: 50px;">
          <%= link_to member_path(@member) do %>
            <h3><%= @post.member.nickname %></h3><br>
          <% end %>
          <%= image_tag @post.image, size: "700x400" %><br>
          <%= @post.shop_name %><br>

          <% if current_member == @post.member %>
            <span class="ml-3"><%= link_to "編集する", edit_post_path, class: "btn btn-outline-success btn-sm" %></span>
            <%= link_to "削除", post_path(@post.id), method: :delete, "data-confirm" => "本当に削除しますか？" %>
          <% end %>
          <div id="favorite_buttons_<%= @post.id %>">
             <%= render "public/favorites/favorite", post: @post %>
          </div>
         <p>
          <%= link_to post_comment_path(@post)do %>
          コメント件数：<%= @post.post_comments.count %>
          <% end %>
         </p>
         <p><%=@post.address %></p>
          <div id='map'></div>
          <style>
          #map {
            height: 500px;
            width:800px;
          }
          </style>

          <script>
          let map

          function initMap(){
            var test ={lat: <%= @post.latitude %>, lng: <%= @post.longitude %>};
            map = new google.maps.Map(document.getElementById('map'), {
              center: test,
              zoom: 16
            });

            marker = new google.maps.Marker({
              position: test,
              map: map
            });
          }

          </script>

          <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAP_API_KEY'] %>&callback=initMap" async defer></script>
        </div>
      </div>
    </div>
  </div>
</div>



