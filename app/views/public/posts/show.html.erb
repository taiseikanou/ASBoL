<div class="container-fluid">
    <div class="row">
        <div class="col mt-7">
          <div class="mx-auto pt-5" style="width: 700px" style="margin-top: 50px;">
<%= link_to member_path(@member) do %>
<%= @post.member.nickname %><br>
<% end %>
<%= image_tag @post.image, size: "700x400" %><br>
<%= @post.shop_name %><br>
<%= @post.explanation %><br>
<% if current_member == @post.member %>
  <span class="ml-3"><%= link_to "編集する", edit_post_path, class: "btn btn-outline-success btn-sm" %></span>
  <%= link_to "削除", post_path(@post.id), method: :delete, "data-confirm" => "本当に削除しますか？" %>
  <% end %>
<% if @post.favorited_by?(current_member) %>
    <p>
      <%= link_to post_favorites_path(@post), method: :delete do %>
        ♥<%= @post.favorites.count %> いいね
      <% end %>
    </p>
    <% else %>
    <p>
      <%= link_to post_favorites_path(@post), method: :post do %>
        ♡<%= @post.favorites.count %> いいね
      <% end %>
    </p>
  <% end %>
<%= form_with model: [@post, @post_comment] do |f| %>
    <%= f.text_area :comment, rows: '5', placeholder: "コメントをここに",size: "90x5" %>
    <%= f.submit "送信する" %>
  <% end %>
<div>
  <p>コメント件数：<%= @post.post_comments.count %></p>
  <% @post.post_comments.each do |post_comment| %>
</div>
<div class="card" style="width: 50rem;">

    <h5 class="card-title"><%= post_comment.member.nickname %></h5>
    <h6 class="card-subtitle mb-2 text-muted"><%= post_comment.created_at.strftime('%Y/%m/%d') %></h6>
    <p class="card-text"><%= post_comment.comment %></p>
    <% end %>
</div>

<div id='map'></div>

<style>
#map {
  height: 500px;
  width:800px;
}
</style>

<script>
let map

function initMap(){
  var test ={lat: <%= @post.latitude %>, lng: <%= @post.longitude %>};
  map = new google.maps.Map(document.getElementById('map'), {
    center: test,
    zoom: 16
  });

  marker = new google.maps.Marker({
    position: test,
    map: map
  });
}

</script>

<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAP_API_KEY'] %>&callback=initMap" async defer></script>

</div>
</div>
</div>
</div>



